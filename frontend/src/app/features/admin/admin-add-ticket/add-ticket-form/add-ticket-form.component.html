<div class="flex-center form-holder">
  <h2>Add new ticket</h2>
  <form class="flex-center default-form" [formGroup]="addTicketForm">
    <div class="field-holder">
      <mat-form-field appearance="outline">
        <mat-label>Type</mat-label>
        <mat-select formControlName="type" panelClass="default-select">
          <mat-option
            *ngFor="let ticketType of ticketTypeEnum | enumToView"
            [value]="ticketType.value"
          >
            {{ ticketType.name }}
            <span
              *ngIf="addTicketForm.controls.type.value === ticketType.value"
            >
              &#10004;</span
            >
          </mat-option>
        </mat-select>
        <mat-error *ngIf="addTicketForm.controls.type.hasError('required')"
          >Type is required</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Enter event name" formControlName="name" />
        <mat-error *ngIf="addTicketForm.controls.name.hasError('required')"
          >Name is required</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Price</mat-label>
        <input
          matInput
          placeholder="Enter ticket price"
          formControlName="price"
        />
        <mat-error *ngIf="addTicketForm.controls.price.hasError('required')"
          >Price is required</mat-error
        >
        <mat-error *ngIf="addTicketForm.controls.price.hasError('pattern')"
          >Price needs to be a positive whole number</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Date and time</mat-label>
        <input matInput type="datetime-local" formControlName="date" />
        <mat-error *ngIf="addTicketForm.controls.date.hasError('required')"
          >Date and time is required</mat-error
        >
        <mat-error *ngIf="addTicketForm.controls.date.hasError('invalidDate')"
          >Date and time cannot be earlier than current time</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>City</mat-label>
        <input
          matInput
          placeholder="Enter event place"
          formControlName="cityName"
        />
        <mat-error *ngIf="addTicketForm.controls.cityName.hasError('required')"
          >City name is required</mat-error
        >
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Number of tickets</mat-label>
        <input
          matInput
          placeholder="Enter number of tickets"
          formControlName="numberOfAllTickets"
        />
        <mat-error
          *ngIf="addTicketForm.controls.numberOfAllTickets.hasError('required')"
          >Number of tickets is required</mat-error
        >
        <mat-error
          *ngIf="addTicketForm.controls.numberOfAllTickets.hasError('pattern')"
          >Number of tickets needs to be a positive whole number</mat-error
        >
      </mat-form-field>
    </div>
    <button
      mat-raised-button
      color="primary"
      [disabled]="!addTicketForm.valid"
      (click)="submitNewTicket()"
    >
      Add ticket
    </button>
  </form>
  <div class="response-holder flex-center">
    <p
      *ngIf="addTicketResponse"
      [ngClass]="addTicketResponse.isError ? 'warn' : 'primary'"
    >
      {{ addTicketResponse.message }}
    </p>
  </div>
</div>
